# Лабораторная работа: CI/CD Pipeline с GitHub Actions

Простое консольное приложение-калькулятор на Python для демонстрации настройки CI/CD pipeline в GitHub Actions.


1. Репозиторий на GitHub
https://github.com/Exxxto/lab6

2. Вкладка Actions

3. Артефакты

4. Логи выполнения
Надо открыть любой job, там есть:
- Установка зависимостей
- Выполнение тестов
- Результаты проверок


## CI/CD Pipeline

Pipeline состоит из следующих jobs:

1. Build (Сборка)
- Установка Python 3.11 и зависимостей из requirements.txt
- Кэширование pip пакетов для ускорения последующих запусков
- Проверка синтаксиса Python файлов (py_compile)

2. Test (Тестирование) - выполняется параллельно с линтингом
Запускаются все unit-тесты из test_calculator.py двумя способами:
- pytest с измерением покрытия кода (coverage)
- unittest для дополнительной проверки

Генерируется HTML отчет о покрытии кода и XML файл. Отчеты сохраняются как артефакты на 7 дней. Если покрытие кода меньше ожидаемого, это видно в отчете.

3. Linting (Проверка качества кода) - выполняется параллельно с Test
Инструмент pylint анализирует код на соответствие стандартам PEP 8 и выявляет:
- Ошибки стиля кода (отступы, пробелы, длина строк)
- Неиспользуемые переменные и импорты
- Потенциальные ошибки в логике
- Нарушения соглашений об именовании

Генерируется оценка качества кода (от 0 до 10). Минимальный порог установлен на 8.0. Отчет сохраняется в файл pylint-report.txt.

4. Security (Проверка безопасности)
 Два инструмента проверяют зависимости проекта:
- safety - сканирует requirements.txt и установленные пакеты на известные уязвимости из базы данных CVE
- pip-audit - дополнительная проверка через PyPI Advisory Database

Генерируются отчеты в JSON и текстовом формате со списком найденных уязвимостей, их серьезностью и рекомендациями по обновлению пакетов.

## Локальный запуск

### Установка зависимостей

```bash
python3 -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### Запуск приложения

```bash
python3 calculator.py
```

### Запуск тестов

```bash
# С помощью pytest
pytest test_calculator.py -v

# С помощью unittest
python -m unittest test_calculator.py -v
```

Главное отличие:
unittest - больше кода, нужны классы
pytest - меньше кода, проще писать, больше возможностей (покрытие кода, красивые отчеты)

### Запуск линтера

```bash
pylint calculator.py test_calculator.py
```

### Проверка безопасности
safety check - проверяет установленные Python библиотеки на известные уязвимости безопасности.

safety:
Использует свою коммерческую базу данных уязвимостей
Быстрее работает
Бесплатная версия имеет ограничения

pip-audit:
Использует официальную базу PyPI Advisory Database
Более свежие данные
Полностью бесплатный и открытый

```bash
safety check
pip-audit
```